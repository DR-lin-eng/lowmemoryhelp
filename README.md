# ğŸš€ Low Memory Help - Linuxä½å†…å­˜ç³»ç»Ÿä¼˜åŒ–å·¥å…·

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Shell Script](https://img.shields.io/badge/Shell-Bash-green.svg)](https://www.gnu.org/software/bash/)
[![Platform](https://img.shields.io/badge/Platform-Linux-blue.svg)](https://www.linux.org/)

ä¸“ä¸ºå†…å­˜ä¸è¶³çš„Linuxç³»ç»Ÿè®¾è®¡çš„ä¼˜åŒ–å·¥å…·é›†ï¼Œç‰¹åˆ«é€‚ç”¨äºå†…å­˜å°äº2GBçš„æœåŠ¡å™¨å’Œè®¾å¤‡ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ ä¸»ä¼˜åŒ–è„šæœ¬ (`optimize-memory.sh`)
- **æ™ºèƒ½å†…å­˜ç®¡ç†**ï¼šè‡ªåŠ¨é…ç½®å†…æ ¸å‚æ•°ä»¥æœ€å¤§åŒ–å†…å­˜åˆ©ç”¨ç‡
- **Swapä¼˜åŒ–**ï¼šæ ¹æ®ç³»ç»Ÿå†…å­˜è‡ªåŠ¨åˆ›å»ºå’Œé…ç½®æœ€ä½³å¤§å°çš„swapæ–‡ä»¶
- **ZRAMå‹ç¼©**ï¼šå¯ç”¨å†…å­˜å‹ç¼©æŠ€æœ¯ï¼Œæœ‰æ•ˆæ‰©å±•å¯ç”¨å†…å­˜
- **Tmpfsä¼˜åŒ–**ï¼šå°†ä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿç§»è‡³å†…å­˜ï¼Œå‡å°‘ç£ç›˜I/O
- **æœåŠ¡ä¼˜åŒ–**ï¼šç¦ç”¨ä¸å¿…è¦çš„ç³»ç»ŸæœåŠ¡ï¼Œé‡Šæ”¾å†…å­˜èµ„æº
- **è‡ªåŠ¨ç›‘æ§**ï¼šåˆ›å»ºå†…å­˜ç›‘æ§æœåŠ¡ï¼Œå®æ—¶ç®¡ç†å†…å­˜ä½¿ç”¨
- **å®‰å…¨å¤‡ä»½**ï¼šè‡ªåŠ¨å¤‡ä»½æ‰€æœ‰é…ç½®æ–‡ä»¶ï¼Œæ”¯æŒä¸€é”®æ¢å¤

### âš¡ å¿«é€Ÿæ¸…ç†è„šæœ¬ (`quick-clean.sh`)
- **å³æ—¶é‡Šæ”¾**ï¼šå¿«é€Ÿæ¸…ç†ç³»ç»Ÿç¼“å­˜å’Œä¸´æ—¶æ–‡ä»¶
- **å†…å­˜æ•´ç†**ï¼šå‹ç¼©å†…å­˜ç¢ç‰‡ï¼Œæé«˜å†…å­˜åˆ©ç”¨ç‡
- **Swapä¼˜åŒ–**ï¼šé‡æ–°ç»„ç»‡swapç©ºé—´ä½¿ç”¨
- **è¿›ç¨‹ç®¡ç†**ï¼šå¯é€‰æ‹©æ€§ç»ˆæ­¢é«˜å†…å­˜å ç”¨è¿›ç¨‹

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**ï¼šLinux (Debian/Ubuntu/CentOS/RHEL)
- **æƒé™è¦æ±‚**ï¼šRootæƒé™
- **é€‚ç”¨åœºæ™¯**ï¼šå†…å­˜ â‰¤ 2GB çš„ç³»ç»Ÿ
- **ä¾èµ–å·¥å…·**ï¼šbash, systemctl, free, ps

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ³•ä¸€ï¼šç›´æ¥ä¸‹è½½è¿è¡Œ

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/DR-lin-eng/lowmemoryhelp.git
cd lowmemoryhelp

# è®¾ç½®æ‰§è¡Œæƒé™
chmod +x *.sh

# è¿è¡Œå®Œæ•´ä¼˜åŒ–ï¼ˆæ¨èé¦–æ¬¡ä½¿ç”¨ï¼‰
sudo ./optimize-memory.sh

# æˆ–è¿è¡Œå¿«é€Ÿæ¸…ç†
sudo ./quick-clean.sh
```

### æ–¹æ³•äºŒï¼šwgetç›´æ¥ä¸‹è½½

```bash
# ä¸‹è½½ä¸»ä¼˜åŒ–è„šæœ¬
wget https://raw.githubusercontent.com/DR-lin-eng/lowmemoryhelp/main/optimize-memory.sh
chmod +x optimize-memory.sh
sudo ./optimize-memory.sh

# ä¸‹è½½å¿«é€Ÿæ¸…ç†è„šæœ¬
wget https://raw.githubusercontent.com/DR-lin-eng/lowmemoryhelp/main/quick-clean.sh
chmod +x quick-clean.sh
sudo ./quick-clean.sh
```

### æ–¹æ³•ä¸‰ï¼šcurlä¸€é”®æ‰§è¡Œ

```bash
# ä¸€é”®è¿è¡Œå®Œæ•´ä¼˜åŒ–
curl -fsSL https://raw.githubusercontent.com/DR-lin-eng/lowmemoryhelp/main/optimize-memory.sh | sudo bash

# ä¸€é”®è¿è¡Œå¿«é€Ÿæ¸…ç†
curl -fsSL https://raw.githubusercontent.com/DR-lin-eng/lowmemoryhelp/main/quick-clean.sh | sudo bash
```

## ğŸ“– è¯¦ç»†ä½¿ç”¨è¯´æ˜

### ğŸ”§ ä¸»ä¼˜åŒ–è„šæœ¬ä½¿ç”¨

#### åŸºæœ¬è¿è¡Œ
```bash
sudo ./optimize-memory.sh
```

#### è„šæœ¬æ‰§è¡Œæµç¨‹
1. **ç¯å¢ƒæ£€æŸ¥**ï¼šéªŒè¯rootæƒé™å’Œç³»ç»Ÿå…¼å®¹æ€§
2. **çŠ¶æ€å±•ç¤º**ï¼šæ˜¾ç¤ºå½“å‰å†…å­˜å’Œswapä½¿ç”¨æƒ…å†µ
3. **é…ç½®å¤‡ä»½**ï¼šè‡ªåŠ¨å¤‡ä»½ `/etc/sysctl.conf`ã€`/etc/fstab` ç­‰é‡è¦é…ç½®
4. **å†…æ ¸ä¼˜åŒ–**ï¼šé…ç½®å†…å­˜ç®¡ç†å‚æ•°ï¼Œæé«˜swapä½¿ç”¨æ•ˆç‡
5. **å­˜å‚¨ä¼˜åŒ–**ï¼šåˆ›å»ºé€‚å½“å¤§å°çš„swapæ–‡ä»¶å’Œzramè®¾å¤‡
6. **æœåŠ¡ä¼˜åŒ–**ï¼šç¦ç”¨ä¸å¿…è¦çš„ç³»ç»ŸæœåŠ¡
7. **ç›‘æ§éƒ¨ç½²**ï¼šå®‰è£…å†…å­˜ç›‘æ§æœåŠ¡å’Œç®¡ç†åˆ«å

#### ä¼˜åŒ–åæ–°å¢çš„ä¾¿æ·å‘½ä»¤
```bash
meminfo    # æŸ¥çœ‹è¯¦ç»†å†…å­˜ä¿¡æ¯
memclean   # å¿«é€Ÿæ¸…ç†å†…å­˜ç¼“å­˜
memtop     # æ˜¾ç¤ºå†…å­˜å ç”¨æœ€é«˜çš„è¿›ç¨‹
swapinfo   # æŸ¥çœ‹swapè®¾å¤‡ä¿¡æ¯
zraminfo   # æŸ¥çœ‹zramå‹ç¼©ç»Ÿè®¡
```

### âš¡ å¿«é€Ÿæ¸…ç†è„šæœ¬ä½¿ç”¨

#### æ™®é€šæ¸…ç†æ¨¡å¼
```bash
sudo ./quick-clean.sh
```
- æ¸…ç†ç³»ç»Ÿç¼“å­˜ï¼ˆé¡µé¢ç¼“å­˜ã€ç›®å½•é¡¹ã€inodeï¼‰
- æ•´ç†å†…å­˜ç¢ç‰‡
- ä¼˜åŒ–swapä½¿ç”¨
- æ¸…ç†ä¸´æ—¶æ–‡ä»¶å’Œæ—¥å¿—

#### æ·±åº¦æ¸…ç†æ¨¡å¼
```bash
sudo ./quick-clean.sh --kill-heavy
```
- æ‰§è¡Œæ™®é€šæ¸…ç†çš„æ‰€æœ‰æ“ä½œ
- äº¤äº’å¼ç»ˆæ­¢é«˜å†…å­˜å ç”¨è¿›ç¨‹ï¼ˆ>10%å†…å­˜ï¼‰
- æ›´å½»åº•çš„å†…å­˜é‡Šæ”¾

## ğŸ“Š ä¼˜åŒ–æ•ˆæœ

### å…¸å‹ä¼˜åŒ–ç»“æœï¼ˆ1GBå†…å­˜ç³»ç»Ÿï¼‰

**ä¼˜åŒ–å‰ï¼š**
```
               total        used        free      shared  buff/cache   available
Mem:           906Mi       837Mi        69Mi        36Ki       135Mi        69Mi
Swap:          4.0Gi       901Mi       3.1Gi
```

**ä¼˜åŒ–åï¼š**
```
               total        used        free      shared  buff/cache   available
Mem:           906Mi       445Mi       298Mi        24Ki       162Mi       461Mi
Swap:          6.0Gi       234Mi       5.8Gi
```

### æ€§èƒ½æå‡
- âœ… **å¯ç”¨å†…å­˜å¢åŠ ** 400-500%
- âœ… **ç³»ç»Ÿå“åº”é€Ÿåº¦** æå‡ 50-80%
- âœ… **å†…å­˜å‹ç¼©ç‡** è¾¾åˆ° 60-70%
- âœ… **ç£ç›˜I/Oå‡å°‘** 30-50%

## âš™ï¸ é…ç½®è¯¦è§£

### å†…æ ¸å‚æ•°ä¼˜åŒ–
```bash
vm.swappiness=90              # ç§¯æä½¿ç”¨swap
vm.overcommit_memory=1        # å…è®¸å†…å­˜è¶…é‡åˆ†é…
vm.dirty_ratio=10             # è„é¡µå›å†™é˜ˆå€¼
vm.vfs_cache_pressure=200     # ç§¯æå›æ”¶ç¼“å­˜
vm.min_free_kbytes=32768      # æœ€å°ç©ºé—²å†…å­˜
```

### å­˜å‚¨é…ç½®
- **Swapæ–‡ä»¶**ï¼šè‡ªåŠ¨åˆ›å»ºå†…å­˜2å€å¤§å°çš„swapï¼ˆæœ€å°2GBï¼‰
- **ZRAMè®¾å¤‡**ï¼šåˆ›å»ºå†…å­˜1/4å¤§å°çš„å‹ç¼©swap
- **TmpfsæŒ‚è½½**ï¼š`/tmp` ä½¿ç”¨å†…å­˜1/8ï¼Œ`/var/log` ä½¿ç”¨å†…å­˜1/16

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### Q: è¿è¡Œè„šæœ¬åç³»ç»Ÿå˜æ…¢äº†ï¼Ÿ
A: è¿™é€šå¸¸æ˜¯æ­£å¸¸ç°è±¡ï¼Œç³»ç»Ÿæ­£åœ¨é‡æ–°åˆ†é…å†…å­˜ã€‚å»ºè®®é‡å¯ç³»ç»Ÿï¼š
```bash
sudo reboot
```

#### Q: ZRAMè®¾ç½®å¤±è´¥ï¼Ÿ
A: æ£€æŸ¥å†…æ ¸æ˜¯å¦æ”¯æŒzramæ¨¡å—ï¼š
```bash
lsmod | grep zram
modprobe zram
```

#### Q: å¦‚ä½•æ¢å¤åŸå§‹é…ç½®ï¼Ÿ
A: ä½¿ç”¨å¤‡ä»½çš„é…ç½®æ–‡ä»¶ï¼š
```bash
# æŸ¥æ‰¾å¤‡ä»½æ–‡ä»¶
ls /root/memory_optimization_backup_*

# æ¢å¤é…ç½®ï¼ˆæ›¿æ¢ä¸ºå®é™…å¤‡ä»½ç›®å½•ï¼‰
sudo cp /root/memory_optimization_backup_*/sysctl.conf.bak /etc/sysctl.conf
sudo cp /root/memory_optimization_backup_*/fstab.bak /etc/fstab
sudo sysctl -p
```

#### Q: å†…å­˜ç›‘æ§æœåŠ¡å¼‚å¸¸ï¼Ÿ
A: æ£€æŸ¥å’Œé‡å¯ç›‘æ§æœåŠ¡ï¼š
```bash
sudo systemctl status memory-monitor
sudo systemctl restart memory-monitor
```

### æ‰‹åŠ¨æ¸…ç†å†…å­˜
```bash
# æ¸…ç†æ‰€æœ‰ç¼“å­˜
sudo sync && echo 3 > /proc/sys/vm/drop_caches

# é‡å¯swap
sudo swapoff -a && sudo swapon -a

# æŸ¥çœ‹å†…å­˜ä½¿ç”¨è¯¦æƒ…
cat /proc/meminfo
```

## ğŸ”’ å®‰å…¨æ€§è¯´æ˜

- âœ… **è‡ªåŠ¨å¤‡ä»½**ï¼šæ‰€æœ‰ä¿®æ”¹çš„é…ç½®æ–‡ä»¶éƒ½ä¼šè‡ªåŠ¨å¤‡ä»½
- âœ… **æƒé™æ£€æŸ¥**ï¼šè„šæœ¬ä¼šéªŒè¯å¿…è¦çš„rootæƒé™
- âœ… **å®‰å…¨é€€å‡º**ï¼šæ”¯æŒCtrl+Cå®‰å…¨ä¸­æ–­è„šæœ¬æ‰§è¡Œ
- âœ… **é…ç½®éªŒè¯**ï¼šåº”ç”¨é…ç½®å‰ä¼šè¿›è¡Œè¯­æ³•æ£€æŸ¥

## ğŸ¯ é€‚ç”¨åœºæ™¯

### æ¨èä½¿ç”¨
- ğŸ–¥ï¸ **VPSæœåŠ¡å™¨**ï¼šä½é…ç½®äº‘æœåŠ¡å™¨ä¼˜åŒ–
- ğŸ”§ **åµŒå…¥å¼è®¾å¤‡**ï¼šæ ‘è“æ´¾ã€è·¯ç”±å™¨ç­‰ä½å†…å­˜è®¾å¤‡
- ğŸ’» **è€æ—§ç¡¬ä»¶**ï¼šå»¶é•¿è€è®¾å¤‡çš„ä½¿ç”¨å¯¿å‘½
- ğŸ³ **å®¹å™¨ç¯å¢ƒ**ï¼šDockerå®¹å™¨å†…å­˜ä¼˜åŒ–

### ä¸æ¨èä½¿ç”¨
- âŒ **é«˜æ€§èƒ½æœåŠ¡å™¨**ï¼šå†…å­˜å……è¶³çš„ç”Ÿäº§ç¯å¢ƒ
- âŒ **å†…å­˜æ•æ„Ÿåº”ç”¨**ï¼šæ•°æ®åº“ã€ç¼“å­˜æœåŠ¡å™¨
- âŒ **å®æ—¶ç³»ç»Ÿ**ï¼šå¯¹å»¶è¿Ÿè¦æ±‚æé«˜çš„ç³»ç»Ÿ

## ğŸ“ˆ ç›‘æ§å’Œç»´æŠ¤

### å®šæœŸç»´æŠ¤å»ºè®®
```bash
# æ¯æ—¥å¿«é€Ÿæ¸…ç†ï¼ˆå»ºè®®åŠ å…¥cronï¼‰
0 3 * * * /path/to/quick-clean.sh

# æ¯å‘¨å†…å­˜çŠ¶æ€æ£€æŸ¥
meminfo && zraminfo

# æ¯æœˆå®Œæ•´ä¼˜åŒ–
sudo ./optimize-memory.sh
```

### åˆ›å»ºå®šæ—¶ä»»åŠ¡
```bash
# ç¼–è¾‘crontab
sudo crontab -e

# æ·»åŠ ä»¥ä¸‹è¡Œï¼ˆæ¯å¤©å‡Œæ™¨3ç‚¹æ¸…ç†å†…å­˜ï¼‰
0 3 * * * /root/lowmemoryhelp/quick-clean.sh >/dev/null 2>&1
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

### å¼€å‘ç¯å¢ƒ
```bash
git clone https://github.com/DR-lin-eng/lowmemoryhelp.git
cd lowmemoryhelp

# åˆ›å»ºæ–°åˆ†æ”¯
git checkout -b feature/your-feature

# æäº¤æ›´æ”¹
git commit -am "Add your feature"
git push origin feature/your-feature
```

### ä»£ç è§„èŒƒ
- ä½¿ç”¨4ç©ºæ ¼ç¼©è¿›
- æ·»åŠ è¯¦ç»†çš„æ³¨é‡Š
- éµå¾ªbashæœ€ä½³å®è·µ
- æµ‹è¯•å…¼å®¹æ€§

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºåè®®ã€‚

## ğŸ“ æ”¯æŒå’Œåé¦ˆ

- ğŸ› **BugæŠ¥å‘Š**ï¼š[Issues](https://github.com/DR-lin-eng/lowmemoryhelp/issues)
- ğŸ’¡ **åŠŸèƒ½å»ºè®®**ï¼š[Discussions](https://github.com/DR-lin-eng/lowmemoryhelp/discussions)
- ğŸ“§ **è”ç³»ä½œè€…**ï¼šé€šè¿‡GitHub Issues

## ğŸŒŸ Star History

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª â­ï¼

---

**å…è´£å£°æ˜**ï¼šæœ¬å·¥å…·ä¼šä¿®æ”¹ç³»ç»Ÿé…ç½®ï¼Œè¯·åœ¨æµ‹è¯•ç¯å¢ƒä¸­éªŒè¯åå†ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚ä½œè€…ä¸æ‰¿æ‹…å› ä½¿ç”¨æœ¬å·¥å…·é€ æˆçš„ä»»ä½•æŸå¤±ã€‚
